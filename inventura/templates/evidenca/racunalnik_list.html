{% extends "app.html" %}
{% load smart_if %}
{% block content %}
<div class="app">
    <div class="list">
        <h1>Prvi računalniki v Sloveniji</h1>
        <ul>
            {% for racunalnik in object_list %}
            <li>
                <a class="list-item" href="#C{{ racunalnik.pk }}" data-pk="C{{ racunalnik.pk }}">
                    <span class="index">{{ forloop.counter|stringformat:"03d" }}</span>
                    <span class="year">{{ racunalnik.nakup.year }}</span>
                    <span class="name">
                        {{ racunalnik.ime }}
                        <br />
                        <span class="owner">{{ racunalnik.nosilec }}
                            {% if racunalnik.organizacija.count > 1 %} + {{ racunalnik.organizacija.count }}{% endif %}
                        </span>
                    </span>

                </a>
            </li>
            {% endfor %}
        </ul>
    </div>
    <div class="details hide">
        {% for racunalnik in object_list %}
        <div id="C{{ racunalnik.pk }}" class="computer">
            <button class="back">« Nazaj na seznam</button>
            {% if racunalnik.ime %}<h2>{{ racunalnik.ime }}</h2>{% endif %}
            <dl>
                <dt>Nosilec:</dt>
                <dd><a href="/evidenca/organizacije/#{{ racunalnik.nosilec.pk }}">{{ racunalnik.nosilec }}</a></dd>

                {% if racunalnik.organizacija.count > 1 %}
                <dt>Uporabniki:</dt>
                <dd>
                    {% for o in racunalnik.organizacija.all %}
                    <a href="/evidenca/organizacije/#{{ o.pk }}">{{ o }}</a>,
                    {% endfor %}
                </dd>
                {% endif %}
                <dt>Lokacija:</dt>
                <dd>{{ racunalnik.kraj }}</dd>
                <dt>Proizvajalec:</dt>
                <dd>{{ racunalnik.proizvajalec }}</dd>
                <dt>Leto:</dt>
                <dd>{{ racunalnik.nakup.year }}</dd>
                {% if racunalnik.lastnistvo %}
                <dt>Status:</dt>
                <dd>{{ racunalnik.lastnistvo }}</dd>
                {% endif %}
                {% if racunalnik.generacija %}
                <dt>Generacija:</dt>
                <dd>{{ racunalnik.generacija }}</dd>
                {% endif %}
                {% if racunalnik.tip %}
                <dt>Tip:</dt>
                <dd>{{ racunalnik.get_tip_display }}</dd>
                {% endif %}
                {% if racunalnik.opombe %}
                <dt>Opombe:</dt>
                <dd>{{ racunalnik.opombe }}</dd>
                {% endif %}
                {% if racunalnik.opis %}
                <dt>Opis:</dt>
                <dd>{{ racunalnik.opis }}</dd>
                {% endif %}
            </dl>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}